# ChatGPT_Dashboard_aws

[Project Name] - Generating Embeddings and Answering Questions

## Description

This project consists of two files: `embeddings.py` and `calculate_ans.py`, which work together to generate embeddings for files uploaded to Amazon S3 and answer questions based on the generated embeddings.

### `embeddings.py`

The `embeddings.py` file is responsible for uploading a CSV file to an S3 bucket and generating embeddings for the merged question and answer data. It requires the files being uploaded to have a column named 'Combined' that contains the merged question and answer data. This merging can be done using the formula `=CONCATENATE(A1,B1)` in Excel or any other spreadsheet software. The script utilizes the OpenAI text-embedding-ada-002 model to generate embeddings for the merged text. The embeddings are then added to the CSV file and stored back into the S3 bucket.

### `calculate_ans.py`

The `calculate_ans.py` file is used to answer questions based on the embeddings generated by the `embeddings.py` file. It takes a question as input and retrieves the embeddings CSV file from the S3 bucket. The script preprocesses the data, calculates the cosine similarity between the question and each embedding, and selects the top 4 most similar embeddings. It then generates a prompt for the OpenAI API using the selected embeddings as the context. The OpenAI API is called to obtain an answer to the question based on the provided context. The answer is returned as the output of the script.

The similarity calculation within the texts is achieved through the use of embeddings. Embeddings are dense vector representations of textual data that capture semantic meaning. By generating embeddings for the merged text in the CSV file, we can measure the similarity between different texts by calculating the cosine similarity between their corresponding embeddings. This allows us to find the most similar texts to a given question and provide relevant answers based on the contextual information contained in those texts.

## Installation

To use this project, follow these steps:

1. Clone the repository or download the source code.
2. Ensure you have Python 3.x installed on your system.
3. Install the necessary dependencies by running the following command:
   ```shell
   pip install pandas boto3 openai numpy python-dotenv
   ```

## Usage

### Step 1: Set up AWS and OpenAI

1. Create an AWS S3 bucket to store the CSV files.
2. Set up your AWS credentials and ensure you have appropriate access permissions for the S3 bucket.
3. Create an OpenAI account and obtain an API key.

### Step 2: Configuration

1. Create a file named `.env` in the project directory.
2. Add the following lines to the `.env` file:
   ```shell
   API_KEY=<your OpenAI API key>
   ```
   Replace `<your OpenAI API key>` with your actual OpenAI API key.

### Step 3: File Upload and Embedding Generation

1. Open the `embeddings.py` file.
2. Locate the following variables:
   ```python
   bucket_name = 'csvfiles100'
   file_name = 'embedding.csv'
   ```
3. Modify the `bucket_name` variable to match the name of your S3 bucket.
4. Ensure that the CSV files being uploaded have a column named 'Combined' that contains the merged question and answer data.
5. Run the `embeddings.py` script to upload the file to the S3 bucket and generate embeddings.

### Step 

4: Answer Calculation

1. Open the `calculate_ans.py` file.
2. Modify the following line to match your S3 bucket name:
   ```python
   obj = s3.get_object(Bucket='csvfiles100', Key=f'{folder_name}/embedding.csv')
   ```
3. Run the `calculate_ans.py` script.
4. Provide the question when prompted.
5. The script will retrieve the embeddings, calculate similarity, and generate an answer using the OpenAI API.

